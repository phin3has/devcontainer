{
  "name": "ZSH and Homebrew Development Container",
  "build": {
    "context": "..",
    "dockerfile": "../Dockerfile"
  },
  
  // Environment variables to set in the container
  "containerEnv": {
    "PATH": "/home/vscode/.linuxbrew/bin:${containerEnv:PATH}",
    "HOMEBREW_PREFIX": "/home/vscode/.linuxbrew",
    "HOMEBREW_CELLAR": "/home/vscode/.linuxbrew/Cellar",
    "HOMEBREW_REPOSITORY": "/home/vscode/.linuxbrew"
  },
  
  // Run a simple check to ensure Homebrew is working
  "postCreateCommand": "brew --version && brew install coreutils",
  
  // Set the default shell to zsh in VS Code
  "customizations": {
    "vscode": {
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "terminal.integrated.profiles.linux": {
          "zsh": {
            "path": "/bin/zsh"
          }
        }
      },
      "extensions": [
        "ms-azuretools.vscode-docker",
        "github.vscode-pull-request-github"
      ]
    }
  },
  
  // Run as non-root user
  "remoteUser": "vscode"
}